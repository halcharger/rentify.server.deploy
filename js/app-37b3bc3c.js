/**
 * rentifyClientApp - rentifyClientApp Project Generated from HotTowel Angular
 * @authors 
 * @version v0.0.0
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.services","app.sites","app.login","app.configuresite","app.reservations"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","blocks.exception","blocks.logger","blocks.router","ui.router","ngplus","LocalStorageModule","angular-data.DSCacheFactory","ui.bootstrap","flow","angular-images-loaded"])}(),function(){"use strict";angular.module("app.configuresite",["app.core"])}(),function(){"use strict";angular.module("app.login",["app.core"])}(),function(){"use strict";angular.module("app.reservations",["app.core"])}(),function(){"use strict";angular.module("app.sites",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core"])}(),function(){"use strict";angular.module("app.services",["app.core"])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";angular.module("app").run(["authService",function(e){e.fillAuthData()}]),angular.module("app").run(["$rootScope","$state",function(e,t){e.$on("$stateChangeStart",function(e,r,n){r.redirectTo&&(e.preventDefault(),t.go(r.redirectTo,n))})}])}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",r)}function r(e,t,r){return function(n,o){var i=t.config.appErrorPrefix||"",a={exception:n,cause:o};n.message=i+n.message,e(n,o),r.error(n.message,a)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],r.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e){function t(t){return function(r){e.error(t,r)}}var r={catcher:t};return r}angular.module("blocks.exception").factory("exception",e),e.$inject=["logger"]}(),function(){"use strict";function e(e,t){function r(r,n,o){t.error(r,o),e.error("Error: "+r,n)}function n(r,n,o){t.info(r,o),e.info("Info: "+r,n)}function o(r,n,o){t.success(r,o),e.info("Success: "+r,n)}function i(r,n,o){t.warning(r,o),e.warn("Warning: "+r,n)}var a={showToasts:!0,error:r,info:n,success:o,warning:i,log:e.log};return a}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,r){function n(e,n,i,a){function s(e,n){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},o.resolveAlways),t.state(e.state,e.config)}),n&&!g&&(g=!0,r.otherwise(n))}function l(){n.$on("$stateChangeError",function(t,r,n,o,i,s){if(!d){f.errors++,d=!0;var l=r&&(r.title||r.name||r.loadedTemplateUrl)||"unknown target",c="Error routing to "+l+". "+(s.data||"")+". <br/>"+(s.statusText||"")+": "+(s.status||"");a.warning(c,[r]),e.path("/")}})}function c(){l(),p()}function u(){return i.get()}function p(){n.$on("$stateChangeSuccess",function(e,t){f.changes++,d=!1;var r=o.docTitle+" "+(t.title||"");n.title=r})}var d=!1,g=!1,f={errors:0,changes:0},m={configureStates:s,getStates:u,stateCounts:f};return c(),m}var o={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(o,e)},this.$get=n,n.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),angular.module("app").constant("environment",{serverBaseUri:"/",clientId:"rentifyAngularMainApp",environment:"DEV"}),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,r){e.debugEnabled&&e.debugEnabled(!0),r.configure(n.appErrorPrefix),t.configure({docTitle:n.appTitle+": "})}var r=angular.module("app.core");r.config(e),e.$inject=["toastr"];var n={appErrorPrefix:"[rentifyClientApp Error] ",appTitle:"Rentify"};r.value("config",n),r.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"],r.config(["$httpProvider",function(e){e.interceptors.push("authInterceptorService")}]),r.config(["flowFactoryProvider",function(e){e.defaults={permanentErrors:[500,501],maxChunkRetries:2,chunkRetryInterval:5e3}}])}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var r="/404";e.configureStates(t(),r)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}},{state:"root",config:{url:"/",redirectTo:"sites"}}]}angular.module("app.core").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){function t(){return e.when(72)}function r(){var t=[{firstName:"John",lastName:"Papa",age:25,location:"Florida"},{firstName:"Ward",lastName:"Bell",age:31,location:"California"},{firstName:"Colleen",lastName:"Jones",age:21,location:"New York"},{firstName:"Madelyn",lastName:"Green",age:18,location:"North Dakota"},{firstName:"Ella",lastName:"Jobs",age:18,location:"South Dakota"},{firstName:"Landon",lastName:"Gates",age:11,location:"South Carolina"},{firstName:"Haley",lastName:"Guthrie",age:35,location:"Wyoming"}];return e.when(t)}var n={getPeople:r,getMessageCount:t};return n}angular.module("app.core").factory("dataservice",e),e.$inject=["$q"]}(),function(){"use strict";function e(e,t){function r(){n()}function n(){i.navRoutes=a.filter(function(e){return e.settings&&e.settings.configurePropertyNav}).sort(function(e,t){return e.settings.configurePropertyNav-t.settings.configurePropertyNav})}function o(t){if(!t.title||!e.current||!e.current.title)return"";var r=t.name;return e.current.name.substr(0,r.length)===r?"active":""}var i=this,a=t.getStates();i.isCurrent=o,r()}angular.module("app.configuresite").controller("ConfigurePropertyController",e),e.$inject=["$state","routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty",config:{url:"/configureproperty",templateUrl:"app/features/configuresite/configureproperty/configureproperty.html",controller:"ConfigurePropertyController",controllerAs:"vm",redirectTo:"configuresite.configureproperty.overview",title:"Property Details",settings:{configureSiteNav:2}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.contact",config:{url:"/contact",templateUrl:"app/features/configuresite/configureproperty/contact/contact.html",title:"Contact",settings:{configurePropertyNav:5}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.gallery",config:{url:"/gallery",templateUrl:"app/features/configuresite/configureproperty/gallery/gallery.html",title:"Gallery",settings:{configurePropertyNav:3}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r,n,o){function i(){r.getSite(t).then(function(e){a.site=e,console.log("site: ",a.site),a.location=a.site.property.location,a.memento=JSON.stringify(a.location),console.log("location memento: ",a.memento)})}var a=this;a.location={},a.site={},a.memento={},a.save=function(){return a.location.uniqueId=a.site.uniqueId,r.updateLocation(a.location).success(function(){n.success(a.site.name+" Property Location successfully saved.")})},a.cancel=function(){return e.when(function(){a.location=JSON.parse(a.memento)}())},a.getSecurityHeaders=function(){var e=o.get("authorizationData");return e?{Authorization:"Bearer "+e.token}:void 0},a.getFlowJsUploadTarget=function(){return r.getCustomMapImageUploadUrl(t)},a.onFileUploadSuccess=function(e){console.log("file upload success..."),e.cancel()},i()}angular.module("app.configuresite").controller("LocationController",e),e.$inject=["$q","siteUniqueId","sitesService","logger","localStorageService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.location",config:{url:"/location",templateUrl:"app/features/configuresite/configureproperty/location/location.html",controller:"LocationController",controllerAs:"vm",title:"Location",settings:{configurePropertyNav:2}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r,n){function o(){r.getSite(t).then(function(e){i.site=e,i.propertyOverview=i.site.property.overview,i.memento=JSON.stringify(i.propertyOverview)})}var i=this;i.propertyOverview={},i.site={},i.memento={},i.save=function(){return i.propertyOverview.uniqueId=i.site.uniqueId,r.updatePropertyOverview(i.propertyOverview).success(function(){n.success(i.site.name+" Property Overview successfully saved.")})},i.cancel=function(){return e.when(function(){i.propertyOverview=JSON.parse(i.memento)}())},o()}angular.module("app.configuresite").controller("OverviewController",e),e.$inject=["$q","siteUniqueId","sitesService","logger"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.overview",config:{url:"/overview",templateUrl:"app/features/configuresite/configureproperty/overview/overview.html",controller:"OverviewController",controllerAs:"vm",title:"Overview",settings:{configurePropertyNav:1}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.rates",config:{url:"/rates",templateUrl:"app/features/configuresite/configureproperty/rates/rates.html",title:"Rates",settings:{configurePropertyNav:4}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.configureproperty.reviews",config:{url:"/reviews",templateUrl:"app/features/configuresite/configureproperty/reviews/reviews.html",title:"Reviews",settings:{configurePropertyNav:6}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r,n){function o(){i(),n.getSite(l).then(function(e){c.site=e})}function i(){c.navRoutes=s.filter(function(e){return e.settings&&e.settings.configureSiteNav}).sort(function(e,t){return e.settings.configureSiteNav-t.settings.configureSiteNav})}function a(t){if(!t.title||!e.current||!e.current.title)return"";var r=t.name;return e.current.name.substr(0,r.length)===r?"active":""}var s=r.getStates(),l=t.siteUniqueId,c=this;c.isCurrent=a,c.site={},o()}angular.module("app.configuresite").controller("ConfigureSiteController",e),e.$inject=["$state","$stateParams","routerHelper","sitesService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite",config:{url:"/configuresite/{siteUniqueId}",templateUrl:"app/features/configuresite/configuresite.html",controller:"ConfigureSiteController",controllerAs:"vm",redirectTo:"configuresite.theme",resolve:{siteUniqueId:["$stateParams",function(e){return e.siteUniqueId}]}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.pages",config:{url:"/configuresite.pages",templateUrl:"app/features/configuresite/pages/pages.html",title:"Pages",settings:{configureSiteNav:3}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.settings",config:{url:"/configuresite.settings",templateUrl:"app/features/configuresite/settings/settings.html",title:"Settings",settings:{configureSiteNav:4}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r){function n(){t.getSite(e).then(function(e){o.site=e})}var o=this;o.site={},o.themes=["lavilla","some other theme"],n(),o.save=function(){return t.updateTheme(o.site.uniqueId,o.site.themeId).success(function(){r.success("Successfully updated Theme & Styling for "+o.site.name+".")})}}angular.module("app.configuresite").controller("ThemeController",e),e.$inject=["siteUniqueId","sitesService","logger"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"configuresite.theme",config:{url:"/theme",templateUrl:"app/features/configuresite/theme/theme.html",controller:"ThemeController",controllerAs:"vm",title:"Theme & Styling",settings:{configureSiteNav:1}}}]}angular.module("app.configuresite").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r){function n(){r.info("Activated Login View")}var o=this;o.loginData={userName:"",password:"",useRefreshTokens:!1},o.login=function(){return t.login(o.loginData).success(function(){e.path("/sites")})},n()}angular.module("app.login").controller("LoginController",e),e.$inject=["$location","authService","logger"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"login",config:{url:"/login",templateUrl:"app/features/login/login.html",controller:"LoginController",controllerAs:"vm",title:"Login"}}]}angular.module("app.login").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"reservations",config:{url:"/reservations",templateUrl:"app/features/reservations/reservations.html",title:"Reservations",settings:{nav:2,content:'<i class="fa fa-calendar"></i> Reservations'}}}]}angular.module("app.reservations").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,r){function n(){o.getSites()}var o=this;o.sites=[],o.getSites=function(){o.loadingSites=!0,r.getMySites().then(function(e){o.sites=e})},o.refreshSites=function(){return o.loadingSites=!0,r.refreshMySites().success(function(e){o.sites=e})},o.deleteSite=function(t){r.setSelectedSite(t),e.goToDeleteSite(t)},o.editSite=function(t){r.setSelectedSite(t),e.goToConfigureSite(t)},n()}angular.module("app.sites").controller("SitesController",e),e.$inject=["locationService","authService","sitesService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"sites",config:{url:"/sites",templateUrl:"app/features/sites/sites.html",controller:"SitesController",controllerAs:"vm",settings:{nav:1,content:'<i class="fa fa-globe"></i> Sites'}}}]}angular.module("app.sites").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";angular.module("app.layout").directive("defaultPanel",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{panelHeading:"@"},template:'<div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title">{{panelHeading}}</h4></div><div class="panel-collapse collapse in" aria-expanded="true"><div class="panel-body"><ng-transclude></ng-transclude></div></div></div>'}})}(),function(){"use strict";angular.module("app.layout").directive("globalErrorFeedback",function(){return{restrict:"E",scope:{},controller:["$rootScope","$scope",function(e,t){t.hideMessage=!0,t.message="",e.$on("globalErrorEvent",function(e,r){t.message=r,t.hideMessage=!1}),e.$on("globalClearErrorEvent",function(){t.hideMessage=!0,t.message=""})}],template:'<div data-ng-hide="hideMessage" class="note note-danger note-bordered clearfix" ng-bind-html="message"></div>'}})}(),function(){"use strict";angular.module("app.layout").directive("pageContentContainer",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{pageHeading:"@",faIcon:"@"},template:'<div class="page-container"><div class="page-head"><div class="container"><div class="page-title"><i class="pull-left fa {{faIcon}} fa-2x"></i><h1 class="pull-left">{{pageHeading}}</h1></div></div></div><div class="page-content"><div class="container"><ng-transclude></ng-transclude></div></div></div>'}})}(),function(){"use strict";angular.module("app.layout").directive("portletForm",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{portletHeading:"@",colour:"@",faIcon:"@"},template:'<div class="portlet box {{colour}}"><div class="portlet-title"><div class="caption"><i class="fa {{faIcon}}"></i> {{portletHeading}}</div></div><div class="portlet-body form"><ng-transclude></ng-transclude></div></div>'}})}(),function(){"use strict";function e(e,t,r,n,o,i){function a(){s()}function s(){c.navRoutes=u.filter(function(e){return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function l(t){if(!t.title||!e.current||!e.current.title)return"";var r=t.name,n=e.current.name.substr(0,r.length)===r?"current":"";return n}var c=this,u=r.getStates();c.isCurrent=l,c.loggedInUser=o.authentication.userName,c.environment=i,a(),c.logOut=function(){o.logOut(),t.path("/login")}}angular.module("app.layout").controller("ShellController",e),e.$inject=["$state","$location","routerHelper","logger","authService","environment"]}(),function(){"use strict";angular.module("app.layout").directive("spinnerButton",function(){return{restrict:"E",scope:{buttonclass:"@",text:"@",spinnertext:"@",isdisabled:"=",click:"&"},controller:["$scope",function(e){e.isClicked=!1,e.buttonClick=function(){e.isClicked=!0,e.click()["finally"](function(){e.isClicked=!1})}}],template:'<button class="btn {{buttonclass}} " data-ng-show="isdisabled && !isClicked" data-ng-disabled="true" >{{text}}</button><button class="btn {{buttonclass}} " data-ng-click="buttonClick()" data-ng-hide="(isdisabled && !isClicked) || isClicked" >{{text}}</button><button class="btn {{buttonclass}} " data-ng-show="isClicked" data-ng-disabled="true" ><i class="fa fa-circle-o-notch fa-spin"></i> {{spinnertext}}</button>'}})}(),function(){"use strict";function e(e,t,r,n,o){function i(t){console.log("global generic error handler: rejection:",t);var r="<p>We are sorry but you experienced an unexpected error. We have done all we can to notify the right people so all you can do right now is try again.</p>";if(t.data||0!==t.status||""!==t.statusText)if(400===t.status)if(t.data&&t.data.error_description)r=t.data.error_description;else if(t.data&&"The request is invalid."===t.data.message&&t.data.modelState){var n=[];for(var o in t.data.modelState)if(t.data.modelState.hasOwnProperty(o))for(var i=0;i<t.data.modelState[o].length;i++)n.push(t.data.modelState[o][i]);r="<strong>Failed to save changes due to:</strong><BR/>"+n.join("<br/>")}else t.data&&t.data.message&&(r=t.data.message);else 500===t.status&&t.data.exceptionMessage&&(r=r+"<p><strong>Exception Type:</strong></p><p>"+t.data.exceptionType+"</p>");else r="Unable to connect to the server, please try again in a couple of seconds.";e.$broadcast("globalErrorEvent",r)}var a,s={},l=function(t){t=t||{},t.headers=t.headers||{};var r=o.get("authorizationData");return r&&(t.headers.Authorization="Bearer "+r.token),e.$broadcast("globalClearErrorEvent"),t},c=function(e){var o=t.defer();if(401===e.status){var a=n.get("authService");a.refreshToken().then(function(){u(e.config,o)},function(t){console.log("failed to refresh token: ",t),a.logOut(),r.path("/login"),o.reject(e)})}else i(e),o.reject(e);return o.promise},u=function(e,t){a=a||n.get("$http"),a(e).then(function(e){t.resolve(e)},function(e){t.reject(e)})};return s.request=l,s.responseError=c,s}angular.module("app.services").factory("authInterceptorService",e),e.$inject=["$rootScope","$q","$location","$injector","localStorageService"]}(),function(){"use strict";function e(e,t,r,n,o){var i,a=o.serverBaseUri,s=o.clientId,l={},c={isAuth:!1,userName:"",useRefreshTokens:!1},u={provider:"",userName:"",email:"",externalAccessToken:""},p=function(e){return f(),i=i||t.get("$http"),i.post(a+"api/account/register",e).then(function(e){return e})},d=function(){c.isAuth||r.path("login")},g=function(e){var r="grant_type=password&username="+e.userName+"&password="+e.password;return e.useRefreshTokens&&(r=r+"&client_id="+s),i=i||t.get("$http"),console.log("about to post to:"+a+"token"),i.post(a+"token",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){e.useRefreshTokens?n.set("authorizationData",{token:t.access_token,userName:e.userName,refreshToken:t.refresh_token,useRefreshTokens:!0}):n.set("authorizationData",{token:t.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=e.useRefreshTokens}).error(function(){f()})},f=function(){n.remove("authorizationData"),c.isAuth=!1,c.userName="",c.useRefreshTokens=!1},m=function(){var e=n.get("authorizationData");e&&(c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=e.useRefreshTokens)},v=function(){console.log("refreshing token...");var r=e.defer(),o=n.get("authorizationData");if(o&&o.useRefreshTokens){var l="grant_type=refresh_token&refresh_token="+o.refreshToken+"&client_id="+s;n.remove("authorizationData"),i=i||t.get("$http"),i.post(a+"token",l,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){n.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:e.refresh_token,useRefreshTokens:!0}),r.resolve(e)}).error(function(){r.reject()})}else r.reject();return r.promise},h=function(e){return i=i||t.get("$http"),i.get(a+"api/account/ObtainLocalAccessToken",{params:{provider:e.provider,externalAccessToken:e.externalAccessToken}}).success(function(e){n.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=!1}).error(function(){f()})},b=function(e){return i=i||t.get("$http"),i.post(a+"api/account/registerexternal",e).success(function(e){n.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),c.isAuth=!0,c.userName=e.userName,c.useRefreshTokens=!1}).error(function(){f()})};return l.saveRegistration=p,l.login=g,l.logOut=f,l.fillAuthData=m,l.authentication=c,l.refreshToken=v,l.obtainAccessToken=h,l.externalAuthData=u,l.registerExternal=b,l.redirectToLoginIfNotAuthenticated=d,l}angular.module("app.services").factory("authService",e),e.$inject=["$q","$injector","$location","localStorageService","environment"]}(),function(){"use strict";function e(e){var t={goToConfigureSite:function(t){e.path("/configuresite/"+t.uniqueId)},goToDeleteSite:function(){e.path("/configuresite.delete")}};return t}angular.module("app").factory("locationService",e),e.$inject=["$location"]}(),function(){"use strict";function e(e,t,r,n,o){r.redirectToLoginIfNotAuthenticated();var i,a="mysites",s=n.serverBaseUri,l=(new o(a,{maxAge:9e4,cacheFlushInterval:6e5,deleteOnExpire:"aggressive"}),{});return l.getMySites=function(){var r=t.defer(),n=(new Date).getTime(),i=o.get(a);return i.get(a)?r.resolve(i.get(a)):e.get(s+"api/mysites").success(function(e){console.log("time taken for mysites request: "+((new Date).getTime()-n)+"ms"),i.put(a,e),r.resolve(e)}),r.promise},l.getSite=function(e){return l.getMySites().then(function(t){for(var r=0;r<t.length;r++)if(t[r].uniqueId===e)return t[r]})},l.refreshMySites=function(){return e.get(s+"api/mysites").success(function(e){var t=o.get(a);return t.put(a,e),e})},l.addSite=function(t){return e.post(s+"api/mysites/add",t).success(function(){var e=o.get(a),r=e.get(a);r.push(t),e.put(a,r)})},l.updateTheme=function(t,r){return e.post(s+"api/site/updatetheme",{uniqueId:t,themeId:r}).success(function(){l.refreshMySites()})},l.deleteSite=function(t){return e["delete"](s+"api/mysites/delete?uniqueId="+t).success(function(){for(var e=o.get(a),r=e.get(a),n=r.length-1;n>=0;n--)r[n].uniqueId===t&&r.splice(n,1);e.put(a,r)})},l.removeGalleryImage=function(t,r,n){return e.post(s+"api/site/removegalleryimage",{siteUniqueId:t,galleryId:r,imageUrl:n})},l.getPropertyOverview=function(t){return e.get(s+"api/site/propertyoverview?siteUniqueId="+t)},l.updatePropertyOverview=function(t){return e.post(s+"api/site/updatepropertyoverview",t)},l.getLocation=function(t){return e.get(s+"api/site/location?siteUniqueId="+t)},l.updateLocation=function(t){return e.post(s+"api/site/updatelocation",t)},l.getGallery=function(t){return e.get(s+"api/site/gallery?siteUniqueId="+t)},l.updateGallery=function(t){return e.post(s+"api/site/updategallery",t)},l.getCustomMapImageUploadUrl=function(e){return s+"api/site/mapimage/upload?siteUniqueId="+e},l.getGalleryImageUploadUrl=function(e,t){return s+"api/site/gallery/upload?siteUniqueId="+e+"&galleryId="+t},l.setSelectedSite=function(e){i=e},l.getSelectedSite=function(){return i},l.clearSelectedSite=function(){i={}},l}angular.module("app.services").factory("sitesService",e),e.$inject=["$http","$q","authService","environment","DSCacheFactory"]}(),function(){"use strict";function e(e){function t(e,t,o){o.$observe("htImgPerson",function(e){e=r+(e||n),o.$set("src",e)})}var r=e.imageBasePath,n=e.unknownPersonImageSource,o={link:t,restrict:"A"};return o}angular.module("app.widgets").directive("htImgPerson",e),e.$inject=["config"]}(),function(){"use strict";function e(){var e={scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"app/widgets/widget-header.html",restrict:"EA"};return e}angular.module("app.widgets").directive("htWidgetHeader",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/core/404.html",'<page-content-container page-heading="404 : Page Not Found"><div class="note note-danger note-bordered clearfix"><h4 class=block>ATTENTION</h4><p>We\'re sorry to say but the route or page you\'re trying to navigate to does not exist or could not be found. Try a different route or page.</p></div></page-content-container>'),e.put("app/layout/shell.html",'<div data-ng-controller="ShellController as vm"><div class=page-header><div class=page-header-top><div class=container><div class=page-logo><a href="/"><h1>RENTIFY</h1></a></div><div class=top-menu><ul class="nav navbar-nav pull-right"><li class="dropdown dropdown-user dropdown-dark"><a href class=dropdown-toggle><span class="username username-hide-mobile">{{vm.loggedInUser}}</span></a></li></ul></div></div></div><div class=page-header-menu><div class=container><div class=hor-menu><ul class="nav navbar-nav"><li class="menu-dropdown mega-menu-dropdown" ng-class=vm.isCurrent(r) ng-repeat="r in vm.navRoutes"><a ui-sref={{r.name}} ng-bind-html=r.settings.content></a></li><li class="menu-dropdown mega-menu-dropdown"><a ng-click=vm.logOut(); class=dropdown-toggle><i class="fa fa-power-off"></i> Logout</a></li></ul></div></div></div></div><div ui-view=""></div><div class="page-footer footer"><div class=container>2014 &copy; Metronic. All Rights Reserved. [{{vm.environment.environment}}]</div></div><div class=scroll-to-top><i class=icon-arrow-up></i></div></div>'),e.put("app/widgets/widget-header.html",'<div class=widget-head><div class="page-title pull-left">{{title}}</div><small class=page-title-subtle ng-show=subtitle>({{subtitle}})</small><div class="widget-icons pull-right"></div><small class="pull-right page-title-subtle" ng-show=rightText>{{rightText}}</small><div class=clearfix></div></div>'),e.put("app/features/configuresite/configuresite.html",'<page-content-container page-heading="EDIT SITE: {{vm.site.name}}"><div class="tabbable tabbable-custom tabbable-noborder"><ul class="nav nav-tabs"><li ng-class=vm.isCurrent(r) ng-repeat="r in vm.navRoutes"><a ui-sref={{r.name}} aria-expanded=false>{{r.title}}</a></li></ul><div class=tab-content><div class="tab-pane active"><div ui-view=""></div></div></div></div></page-content-container>'),e.put("app/features/login/login.html",'<page-content-container page-heading=LOGIN><portlet-form portlet-heading="Login with your email and password below" colour=blue-hoki fa-icon=fa-cogs><form class=form-horizontal name=loginForm novalidate><div class=form-body><div class=form-group><label class="col-md-3 control-label">email</label><div class="col-md-4 ng-class:{\'has-error has-feedback\': loginForm.userName.$invalid && !loginForm.userName.$pristine};"><input type=text class=form-control name=userName placeholder=email data-ng-model=vm.loginData.userName required autofocus><p data-ng-show="loginForm.userName.$invalid && !loginForm.userName.$pristine" class=help-block>Please provide a value for email</p></div></div><div class=form-group><label class="col-md-3 control-label">password</label><div class="col-md-4 ng-class:{\'has-error has-feedback\': loginForm.password.$invalid && !loginForm.password.$pristine};"><input type=password class=form-control name=password placeholder=Password data-ng-model=vm.loginData.password required><p data-ng-show="loginForm.password.$invalid && !loginForm.password.$pristine" class=help-block>Please provide a value for password</p></div></div><div class=form-group><label class="col-md-3 control-label"></label><div class=col-md-4><input name=rememberMe type=checkbox data-ng-model=vm.loginData.useRefreshTokens><label for=rememberMe>&nbsp;Remember me</label></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-4><spinner-button text=Login spinnertext="Logging in...." isdisabled=loginForm.$invalid buttonclass="btn-md btn-info" click=vm.login()></spinner-button></div></div><div class=form-group><div class=col-md-3></div><div class=col-md-4><global-error-feedback></global-error-feedback></div></div></div></form></portlet-form></page-content-container>'),e.put("app/features/reservations/reservations.html",'<page-content-container page-heading="Reservations & Availability"></page-content-container>'),e.put("app/features/sites/sites.html",'<page-content-container page-heading="MY SITES" fa-icon=fa-globe><global-error-feedback></global-error-feedback><div class="row margin-top-5"><div class=col-md-6><div class=input-group><span class=input-group-addon>Search:</span> <input type=text class=form-control> <span class=input-group-btn><button class="btn btn-default" type=submit><i class="fa fa-search"></i></button></span></div></div><div class=col-md-4><div class=input-group><span class=input-group-addon>Filter by Owner:</span><select class=form-control><option>Arnold</option><option>Tony Blair</option><option>Ken Livingston</option><option>David Cameron</option><option>Ed Milliband</option></select></div></div><div class=pull-right><a data-ng-click=vm.refreshSites() class="btn btn-info btn"><i class="fa fa-refresh"></i> Refresh</a> <a href=/addsite class="btn btn-success btn"><i class="fa fa-plus"></i> Add</a></div></div><div class="row margin-top-20"><span class=col-md-4 data-ng-repeat="site in vm.sites"><div class="portlet box blue-hoki"><div class=portlet-title><div class=caption><i class="fa fa-globe"></i>{{site.uniqueId}}</div><div class=actions><a data-ng-click=vm.editSite(site) class="btn btn-default btn-sm"><i class="fa fa-cog"></i> Configure</a></div></div><div class=portlet-body><div class=slimScrollDiv style="position: relative; overflow: hidden; width: auto; height: 50px;"><div class=scroller style="height: 50px; overflow: hidden; width: auto;" data-rail-visible=1 data-rail-color=yellow data-handle-color=#a1b2bd data-initialized=1><p><strong>Name:</strong> {{site.name}}</p><p><strong>Theme:</strong> {{site.themeId}}</p></div></div></div></div></span></div></page-content-container>'),e.put("app/features/configuresite/configureproperty/configureproperty.html",'<div class="navbar navbar-default" role=navigation><div class=navbar-header><span class=navbar-brand>Configure Property: {{propertyName}}</span></div><div class="collapse navbar-collapse navbar-ex1-collapse"><ul class="nav navbar-nav"><li ng-class=vm.isCurrent(r) ng-repeat="r in vm.navRoutes"><a ui-sref={{r.name}} aria-expanded=false>{{r.title}}</a></li></ul></div></div><div ui-view=""></div>'),e.put("app/features/configuresite/pages/pages.html","pages"),e.put("app/features/configuresite/settings/settings.html","settings"),e.put("app/features/configuresite/theme/theme.html",'<h4>Select the theme and styling details for your website</h4><p>&nbsp;</p><global-error-feedback></global-error-feedback><default-panel panel-heading=Theme><div class=form-group><label for=theme>Theme</label><select id=theme name=theme ng-model=vm.site.themeId ng-options="theme as theme for theme in vm.themes" class=form-control></select></div></default-panel><div class=clearfix><spinner-button text=Save spinnertext=Saving.... isdisabled=themeForm.$invalid buttonclass="btn-md btn-info pull-right" click=vm.save()></spinner-button></div>'),e.put("app/features/configuresite/configureproperty/gallery/gallery.html","gallery"),e.put("app/features/configuresite/configureproperty/contact/contact.html","contact"),e.put("app/features/configuresite/configureproperty/location/location.html",'<global-error-feedback></global-error-feedback><div class="form-actions top clearfix"><div class="btn-set pull-right"><spinner-button buttonclass=btn-warning text=Cancel spinnertext=Cancelling... click=vm.cancel()></spinner-button><spinner-button buttonclass=btn-primary isdisabled=locationForm.$invalid text=Save spinnertext=Saving... click=vm.save()></spinner-button></div></div><form name=locationForm novalidate><default-panel class=margin-top-10 panel-heading="Property Address"><div class="form-group ng-class:{\'has-error has-feedback\': locationForm.address1.$invalid && !locationForm.address1.$pristine};"><label for=address1>Address Line 1<p data-ng-show="locationForm.address1.$invalid && !locationForm.address1.$pristine" class=help-block>Please provide a value for this field</p></label> <input type=text id=address1 name=address1 ng-model=vm.location.addressLine1 class=form-control required></div><div class=form-group><label for=address1>Address Line 2</label> <input type=text id=address2 ng-model=vm.location.addressLine2 class=form-control></div><div class=form-group><label for=city>City / Town</label> <input type=text id=city ng-model=vm.location.city class=form-control></div><div class=form-group><label for=postcode>Post Code</label> <input type=text id=postcode ng-model=vm.location.postCode class=form-control></div><div class="form-group ng-class:{\'has-error has-feedback\': locationForm.province.$invalid && !locationForm.province.$pristine};"><label for=province>Province<p data-ng-show="locationForm.province.$invalid && !locationForm.province.$pristine" class=help-block>Please provide a value for this field</p></label> <input type=text id=province name=province ng-model=vm.location.province class=form-control required></div><div class="form-group ng-class:{\'has-error has-feedback\': locationForm.country.$invalid && !locationForm.country.$pristine};"><label for=country>Country<p data-ng-show="locationForm.country.$invalid && !locationForm.country.$pristine" class=help-block>Please provide a value for this field</p></label> <input type=text id=country name=country ng-model=vm.location.country class=form-control required></div></default-panel><default-panel panel-heading=Directions><div class=form-group><label for=directions>Enter textual direction below to allow your guests to know how to get to your property:</label> <textarea id=directions ng-model=vm.location.directionsHtml class=form-control rows=6></textarea> <span class=help-block>Enter the directions to your accomodation. You may want to enter multiple sets of directions from different general starting areas.</span></div></default-panel></form><global-error-feedback></global-error-feedback><div class="form-actions bottom clearfix"><div class="btn-set pull-right"><spinner-button buttonclass=btn-warning text=Cancel spinnertext=Cancelling... click=vm.loadData()></spinner-button><spinner-button buttonclass=btn-primary isdisabled=locationForm.$invalid text=Save spinnertext=Saving... click=vm.save()></spinner-button></div></div><form server-validate="" novalidate><default-panel panel-heading="Custom Map" class=margin-top-10><p>Upload a custom image of a map detailing directions to your property. This map will be displayed on the Location page of your website and will help your users to understand where you are.</p><div class=form-group flow-init="{target: vm.getFlowJsUploadTarget(), headers: vm.getSecurityHeaders()}" flow-file-added=!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()] flow-file-success=vm.onFileUploadSuccess($file)><div><div class=gallery-box ng-hide=$flow.files.length><span class=title>Current Map Image</span><div class=thumbnail><a target=_blank href={{vm.location.customMapImageUrl}}><img src={{vm.location.customMapImageUrl}}></a></div><div class="btn-set pull-right margin-top-10"><span class="btn btn-warning" flow-btn="">Change Image</span></div></div><div ng-repeat="file in $flow.files" class=gallery-box><span class=title>{{file.name}}</span><div class=thumbnail ng-show=$flow.files.length><img flow-img=file></div><div class="progress progress-striped" ng-class="{active: file.isUploading()}"><div class=progress-bar role=progressbar aria-valuenow="{{file.progress() * 100}}" aria-valuemin=0 aria-valuemax=100 ng-style="{width: (file.progress() * 100) + \'%\'}"><span class=sr-only>{{file.progress()}}% Complete</span></div></div><div class="btn-set pull-right margin-top-10"><button class="btn btn btn-danger" ng-click=file.cancel()>Remove</button> <a class="btn btn btn-primary" ng-click=$flow.upload()>Upload</a></div></div><div class=clear></div></div></div></default-panel></form>'),e.put("app/features/configuresite/configureproperty/overview/overview.html",'<global-error-feedback></global-error-feedback><div class="form-actions top clearfix"><div class="btn-set pull-right"><spinner-button buttonclass=btn-warning text=Cancel spinnertext=Cancelling... click=vm.cancel()></spinner-button><spinner-button buttonclass=btn-primary text=Save spinnertext=Saving... click=vm.save()></spinner-button></div></div><default-panel class=margin-top-10 panel-heading=Description><div class=form-group><label for=siteName>Property Name</label> <input type=text id=siteName ng-model=vm.propertyOverview.name class=form-control required></div><div class=form-group><label for=mainTitle>Main Title</label> <input type=text id=mainTitle ng-model=vm.propertyOverview.mainTitle class=form-control required></div><div class=form-group><label for=subTitle>Sub Title / Tagline</label> <input type=text id=subTitle ng-model=vm.propertyOverview.subTitle class=form-control required></div><div class=form-group><label for=propertyDescription>Property description</label> <textarea id=propertyDescription ng-model=vm.propertyOverview.description class=form-control rows=3></textarea></div></default-panel><default-panel panel-heading=Details><div class="form-group col-md-6"><label for=sleeps>Sleeps:</label> <input type=number id=sleeps ng-model=vm.propertyOverview.sleeps class=form-control required></div><div class="form-group col-md-6"><label for=squaremeters>Size in sqaure meters:</label> <input type=number id=squaremeters ng-model=vm.propertyOverview.squareMeters class=form-control required></div></default-panel><default-panel panel-heading=Rooms><div class="row margin-top-10"><label class=col-md-1>Bedrooms</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsBedrooms type=number></div><label class=col-md-1>Lounges</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsLounges type=number></div><label class=col-md-1>Dining Rooms</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsDiningRooms type=number></div><label class=col-md-1>Reception Rooms</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsReceptionRooms type=number></div></div><div class="row margin-top-10"><label class=col-md-1>Kitchens</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsKitchens type=number></div><label class=col-md-1>Bathrooms</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsBathrooms type=number></div><label class=col-md-1>Showers</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsShowers type=number></div><label class=col-md-1>Pantry</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsPantries type=number></div></div><div class="row margin-top-10"><label class=col-md-1>Toilet</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsToilets type=number></div><label class=col-md-1>Study</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsStudies type=number></div><label class=col-md-1>Scullery</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsSculleries type=number></div><label class=col-md-1>Entertainment Room</label><div class=col-md-2><input class="form-control input-xsmall" ng-model=vm.propertyOverview.roomsEntertainmentRooms type=number></div></div><div class="form-group margin-top-10"><label for=customRooms>Add custom text about the rooms</label> <textarea id=customRooms data-ng-model=vm.propertyOverview.roomsCustomRoomsHtml class=form-control rows=3></textarea></div></default-panel><default-panel panel-heading="Property Facts"><div class="row margin-top-10"><span class=col-md-4><input ng-model=vm.propertyOverview.factsAccessible247 type=checkbox> Accesible 24/7</span> <span class=col-md-4><input ng-model=vm.propertyOverview.factsPetsWelcome type=checkbox> Pets welcome</span> <span class=col-md-4><input ng-model=vm.propertyOverview.factsSecureOnsiteParking type=checkbox> Secure Parking</span></div><div class="row margin-top-10"><span class=col-md-4><input ng-model=vm.propertyOverview.factsHouseKeeper type=checkbox> House keeper</span> <span class=col-md-4><input ng-model=vm.propertyOverview.factsSmokingAllowed type=checkbox> Smoking allowed</span></div><div class="form-group margin-top-10"><label for=customFacts>Add custom facts about the property</label> <textarea id=customFacts ng-model=vm.propertyOverview.factsCustomFactsHtml class=form-control rows=3></textarea></div></default-panel><default-panel panel-heading=Amenities><div class="row margin-top-10"><span class=col-md-4><input ng-model=vm.propertyOverview.amenitiesDishwasher type=checkbox> Dish Washer</span> <span class=col-md-4><input ng-model=vm.propertyOverview.amenitiesStove type=checkbox> Stove / Oven</span> <span class=col-md-4><input ng-model=vm.propertyOverview.amenitiesMicrowaveOven type=checkbox> Microwave</span></div><div class="row margin-top-10"><span class=col-md-4><input ng-model=vm.propertyOverview.amenitiesDSTV type=checkbox> TV (DSTV)</span> <span class=col-md-4><input ng-model=vm.propertyOverview.amenitiesTumbleDryer type=checkbox> Tumble Dryer</span></div><div class="form-group margin-top-10"><label for=customAmenities>Add custom amenities about the property</label> <textarea id=customAmenities ng-model=vm.propertyOverview.amenitiesCustomAmenitiesHtml class=form-control rows=3></textarea></div></default-panel><global-error-feedback></global-error-feedback><div class="form-actions bottom clearfix"><div class="btn-set pull-right"><spinner-button buttonclass=btn-warning text=Cancel spinnertext=Cancelling... click=vm.cancel()></spinner-button><spinner-button buttonclass=btn-primary text=Save spinnertext=Saving... click=vm.save()></spinner-button></div></div>'),e.put("app/features/configuresite/configureproperty/rates/rates.html","rates"),e.put("app/features/configuresite/configureproperty/reviews/reviews.html","reviews")
}]);